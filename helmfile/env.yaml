global:
  projectName: ampere
  namespace: ampere
  storageClass: local-path
  kubeVersion: "1.31"
networking:
  ciliumCidr: 10.10.0.0/16
  masterIp: 192.168.11.100
nodes:
  postgresql: 192.168.11.101
  minio: 192.168.11.102
  airflow: 192.168.11.103
monitoring:
  namespace: monitoring
  node: ampere-k8s-node2
infra:
  node: ampere-k8s-node2
spark:
  node: ampere-k8s-node4
  jobNamespaces:
    - ampere
ivyCache:
  name: ivy-cache
  size: 10Gi
  storageClass: local-path
  accessMode: ReadWriteOnce
  mountPath: /opt/spark/ivy
  node: ampere-k8s-node4
  loader:
    enabled: true
    image: busybox:1.36
  bootstrap:
    enabled: true
    image: curlimages/curl:8.7.1
    ttlSecondsAfterFinished: 600
    urls:
      - https://repo1.maven.org/maven2/software/amazon/awssdk/bundle/2.40.16/bundle-2.40.16.jar
      - https://repo1.maven.org/maven2/org/postgresql/postgresql/42.7.3/postgresql-42.7.3.jar
      - https://repo1.maven.org/maven2/org/apache/hadoop/hadoop-aws/3.4.2/hadoop-aws-3.4.2.jar
      - https://repo1.maven.org/maven2/org/apache/hadoop/hadoop-common/3.4.2/hadoop-common-3.4.2.jar
      - https://repo1.maven.org/maven2/org/apache/hadoop/hadoop-client-runtime/3.4.2/hadoop-client-runtime-3.4.2.jar
      - https://repo1.maven.org/maven2/org/apache/hadoop/hadoop-client-api/3.4.2/hadoop-client-api-3.4.2.jar
      - https://repo1.maven.org/maven2/io/delta/delta-spark_2.13/4.0.1/delta-spark_2.13-4.0.1.jar
      - https://repo1.maven.org/maven2/io/delta/delta-storage/4.0.1/delta-storage-4.0.1.jar

airflow:
  gitRepo: https://github.com/AntonMiniazev/ampere_project.git
  host: "http://airflow.local"
  node: ampere-k8s-node3
  workerServiceAccount: airflow-worker
  image:
    repository: ghcr.io/antonminiazev/airflow-ampere
    tag: latest
    pullPolicy: Always
    pullSecret: ghcr-pull

minio:
  node: ampere-k8s-node2
  release: "RELEASE.2025-09-07T16-13-09Z-cpuv1"
  s3_endpoint: "s3.minio.local"
  server_url: "http://minio.ampere.svc.cluster.local:9000"
  repo: quay.io/minio/minio

postgresql:
  host: postgres-service
  port: 5432
  node: ampere-k8s-node1
  image:
    repository: postgres
    tag: "16"
    pullPolicy: IfNotPresent
  airflowUser: airflow_user
  airflowDatabase: airflow_db
  operationalUser: ampere_user
  operationalDatabase: ampere_db
  sourceSchema: source
  tls:
    enabled: false
  access:
    allowedCidrs:
      - 10.10.0.0/16
      - 192.168.0.0/16
      - 100.64.0.0/10

externalSecrets:
  secretName: azure-kv-sp
  storeName: azure-kv

ingress:
  className: nginx
  controller:
    httpNodePort: 30080
    httpsNodePort: 30443
    tcpNodePorts:
      postgres: 32432
  hosts:
    airflow: airflow.local
    minio: minio.local
    postgres: postgres.local
    grafana: grafana.local
  tls:
    caIssuerName: local-ca
    caSecretName: local-ca
    airflowSecret: airflow-tls
    minioSecret: minio-tls
    postgresSecret: postgres-tls
    grafanaSecret: grafana-tls
